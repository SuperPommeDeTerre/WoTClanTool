/* http://keith-wood.name/svg.html
   jQuery DOM compatibility for jQuery SVG v1.4.5.
   Written by Keith Wood (kbwood{at}iinet.com.au) April 2009.
   Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and 
   MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. 
   Please attribute the author if you use it. */
(function(d){var b=/[\t\r\n]/g,a=/\s+/,c="[\\x20\\t\\r\\n\\f]";d.fn.addClass=function(f){return function(m){var o,j,h,k,n,p,g;if(jQuery.isFunction(m)){return this.each(function(i){jQuery(this).addClass(m.call(this,i,this.className))})}if(m&&typeof m==="string"){o=m.split(a);for(j=0,h=this.length;j<h;j++){k=this[j];if(k.nodeType===1){if(!(k.className&&k.getAttribute("class"))&&o.length===1){if(d.svg.isSVGElem(k)){(k.className?k.className.baseVal=m:k.setAttribute("class",m))}else{k.className=m}}else{n=!d.svg.isSVGElem(k)?k.className:k.className?k.className.baseVal:k.getAttribute("class");n=(" "+n+" ");for(p=0,g=o.length;p<g;p++){if(n.indexOf(" "+o[p]+" ")<0){n+=o[p]+" "}}n=jQuery.trim(n);if(d.svg.isSVGElem(k)){(k.className?k.className.baseVal=n:k.setAttribute("class",n))}else{k.className=n}}}}}return this}}(d.fn.addClass);d.fn.removeClass=function(f){return function(n){var o,j,h,m,k,p,g;if(jQuery.isFunction(n)){return this.each(function(i){jQuery(this).removeClass(n.call(this,i,this.className))})}if((n&&typeof n==="string")||n===undefined){o=(n||"").split(a);for(j=0,h=this.length;j<h;j++){m=this[j];if(m.nodeType===1&&(m.className||m.getAttribute("class"))){if(n){k=!d.svg.isSVGElem(m)?m.className:m.className?m.className.baseVal:m.getAttribute("class");k=(" "+k+" ").replace(b," ");for(p=0,g=o.length;p<g;p++){while(k.indexOf(" "+o[p]+" ")>=0){k=k.replace(" "+o[p]+" "," ")}}k=jQuery.trim(k)}else{k=""}if(d.svg.isSVGElem(m)){(m.className?m.className.baseVal=k:m.setAttribute("class",k))}else{m.className=k}}}}return this}}(d.fn.removeClass);d.fn.toggleClass=function(f){return function(g,h){return this.each(function(){if(d.svg.isSVGElem(this)){if(typeof h!=="boolean"){h=!d(this).hasClass(g)}d(this)[(h?"add":"remove")+"Class"](g)}else{f.apply(d(this),[g,h])}})}}(d.fn.toggleClass);d.fn.hasClass=function(f){return function(g){var m=" "+g+" ",k=0,h=this.length,n,j;for(;k<h;k++){n=this[k];if(n.nodeType===1){j=!d.svg.isSVGElem(n)?n.className:n.className?n.className.baseVal:n.getAttribute("class");if((" "+j+" ").replace(b," ").indexOf(m)>-1){return true}}}return false}}(d.fn.hasClass);d.fn.attr=function(f){return function(j,n,l){var h=arguments;if(typeof j==="string"&&n===undefined){var o=f.apply(this,h);if(o&&o.baseVal&&o.baseVal.numberOfItems!=null){n="";o=o.baseVal;if(j=="transform"){for(var k=0;k<o.numberOfItems;k++){var m=o.getItem(k);switch(m.type){case 1:n+=" matrix("+m.matrix.a+","+m.matrix.b+","+m.matrix.c+","+m.matrix.d+","+m.matrix.e+","+m.matrix.f+")";break;case 2:n+=" translate("+m.matrix.e+","+m.matrix.f+")";break;case 3:n+=" scale("+m.matrix.a+","+m.matrix.d+")";break;case 4:n+=" rotate("+m.angle+")";break;case 5:n+=" skewX("+m.angle+")";break;case 6:n+=" skewY("+m.angle+")";break}}o=n.substring(1)}else{o=o.getItem(0).valueAsString}}return(o&&o.baseVal?o.baseVal.valueAsString:o)}var g=j;if(typeof j==="string"){g={};g[j]=n}return d(this).each(function(){if(d.svg.isSVGElem(this)){for(var p in g){var i=(d.isFunction(g[p])?g[p]():g[p]);(l?this.style[p]=i:this.setAttribute(p,i))}}else{f.apply(d(this),h)}})}}(d.fn.attr);d.fn.removeAttr=function(f){return function(g){return this.each(function(){if(d.svg.isSVGElem(this)){(this[g]&&this[g].baseVal?this[g].baseVal.value="":this.setAttribute(g,""))}else{f.apply(d(this),[g])}})}}(d.fn.removeAttr);d.extend(d.cssNumber,{stopOpacity:true,strokeMitrelimit:true,strokeOpacity:true});if(d.cssProps){d.css=function(f){return function(j,h,i,g){var k=(h.match(/^svg.*/)?d(j).attr(d.cssProps[h]||h):"");return k||f(j,h,i,g)}}(d.css)}d.find.isXML=function(f){return function(g){return d.svg.isSVGElem(g)||f(g)}}(d.find.isXML);var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){d.expr.find.TAG=function(f,k){var j=k.getElementsByTagName(f[1]);if(f[1]==="*"){var h=[];for(var g=0;j[g]||j.item(g);g++){if((j[g]||j.item(g)).nodeType===1){h.push(j[g]||j.item(g))}}j=h}return j}}d.expr.filter.CLASS=function(f){var g=new RegExp("(^|"+c+")"+f+"("+c+"|$)");return function(i){var h=(!d.svg.isSVGElem(i)?i.className||(typeof i.getAttribute!=="undefined"&&i.getAttribute("class"))||"":(i.className?i.className.baseVal:i.getAttribute("class")));return g.test(h)}}})(jQuery);